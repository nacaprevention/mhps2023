"use strict";(self.webpackChunkmappinghps2023=self.webpackChunkmappinghps2023||[]).push([[678],{6558:function(e,t,a){a.r(t),a.d(t,{default:function(){return m}});var n=a(7294),o=a(2912),i=a(3654),s=a(9528),r=a(4160);const l=["All States","Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","Federal Capital Territory","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"],c=["All Services","Condom Distribution","Family Life and HIV/AIDS Education (FLHE)/Sexuality Education","Gender and Human Rights (GHR)","Harm Reduction: Medication-Assisted Treatment (MAT)","Harm Reduction: Needle and Syringe Exchange","HIV Self-Testing (HIVST)","HIV Testing Services (HTS)","Mental Health Services","Pre-Exposure Prophylaxis (PrEP)","Social and Behaviour Change Communication (SBCC)","STI Screening and Treatment","Technical Assistance (TA)"],d=["All Populations","Adolescent Girls and Young Women (AGYW) in school","Adolescent Girls and Young Women (AGYW) out of school","Adolescent Boys and Young Men (ABYM) in school","Adolescent Boys and Young Men (ABYM) out of school","Children living with HIV","General population","HIV-exposed infants","Internally Displaced People (IDP)","Key Populations - Female Sex Workers (FSW)","Key Populations - Men who have Sex with Men (MSM)","Key Populations - People in enclosed settings","Key Populations - People Who Inject Drugs (PWID)","Key Populations - Transgender","Orphans and Vulnerable Children (OVC)","Parents","People living with disabilities","People Living with HIV (PLHIV)","Serodiscordant couples","Teachers","Faith Leaders","Fishermen","Pastoralists","Transport Workers"],u=["All Locations","Community","Facility","School"],p=e=>{let{selectedService:t,selectedPopulation:a,selectedLocation:i,setCurrentHeading:s}=e;const l=(0,n.useRef)(null),{0:c,1:d}=(0,n.useState)(!1),{0:u,1:p}=(0,n.useState)("map"),{0:h,1:m}=(0,n.useState)(""),{0:g,1:S}=(0,n.useState)({x:0,y:0}),f={"All Services":"serviceProviders","Condom Distribution":"CondomDistribution","Family Life and HIV/AIDS Education (FLHE)/Sexuality Education":"FamilyLifeAndHivAidsEducationFlheSexualityEducation","Gender and Human Rights (GHR)":"GenderAndHumanRightsGhr","Harm Reduction: Medication-Assisted Treatment (MAT)":"HarmReductionMedicationAssistedTreatmentMat","Harm Reduction: Needle and Syringe Exchange":"HarmReductionNeedleAndSyringeExchange","HIV Self-Testing (HIVST)":"HivSelfTestingHivst","HIV Testing Services (HTS)":"HivTestingServicesHts","Mental Health Services":"MentalHealthServices","Pre-Exposure Prophylaxis (PrEP)":"PreExposureProphylaxisPrep","Social and Behaviour Change Communication (SBCC)":"SocialAndBehaviourChangeCommunicationSbcc","STI Screening and Treatment":"StiScreeningAndTreatment","Technical Assistance (TA)":"TechnicalAssistanceTa"},v={"All Populations":"allPopulations","Adolescent Girls and Young Women (AGYW) in school":"agywInSchool","Adolescent Girls and Young Women (AGYW) out of school":"agywOutOfSchool","Adolescent Boys and Young Men (ABYM) in school":"abymInSchool","Adolescent Boys and Young Men (ABYM) out of school":"abymOutOfSchool","Children living with HIV":"childrenLivingWithHIV","General population":"generalPopulation","HIV-exposed infants":"hivExposedInfants","Internally Displaced People (IDP)":"idp","Key Populations - Female Sex Workers (FSW)":"kpFsw","Key Populations - Men who have Sex with Men (MSM)":"kpMsm","Key Populations - People in enclosed settings":"kpPeopleInEnclosedSettings","Key Populations - People Who Inject Drugs (PWID)":"kpPwid","Key Populations - Transgender":"kpTransgender","Orphans and Vulnerable Children (OVC)":"ovc",Parents:"parents","People living with disabilities":"peopleLivingWithDisabilities","People Living with HIV (PLHIV)":"plhiv","Serodiscordant couples":"serodiscordantCouples",Teachers:"teachers","Faith Leaders":"faithLeaders",Fishermen:"fishermen",Pastoralists:"pastoralists","Transport Workers":"transportWorkers"},P={"All Locations":"allLocations",Community:"community",Facility:"facility",School:"school"};return(0,n.useEffect)((()=>{const e=o.Ys(l.current),n=o.mw4().scale(3500).center([8.6753,9.082]).translate([400,400]),c=o.l49().projection(n),u=o.ut0().domain([0,1,6,11,21,31]).range(["#D3D3D3","#f7faf5","#a0d492","#78b971","#60a455","#3e8d00","#008000"]);Promise.all([o.AVB("./lgas.geojson"),o.AVB("./nigeria_geojson.geojson"),o.gyn("./service_providers.csv"),o.gyn("./stateData.csv")]).then((n=>{let[l,h,g,A]=n;const y=A.reduce(((e,t)=>(e[t.state]=t,e)),{});let H="serviceProviders";"All Services"!==t?H=f[t]:"All Populations"!==a?H=v[a]:"All Locations"!==i&&(H=P[i]);const E=g.reduce(((e,t)=>{const a=t.lga_name,n=+t[H]||0;return e[a]=(e[a]||0)+n,e}),{});e.selectAll(".lga").remove(),e.append("g").selectAll("path").data(l.features).enter().append("path").attr("class","lga").attr("d",c).attr("fill",(e=>{const t=E[e.properties.lga_name];return null!=t?u(t):"#f7faf5"})).attr("stroke","#808080").attr("stroke-width",1),e.selectAll(".state").remove(),e.append("g").selectAll("path").data(h.features).enter().append("path").attr("class","state").attr("d",c).attr("fill","rgba(0,0,0,0)").attr("stroke","#54595f").attr("stroke-width",4).on("mouseover",(function(e,t){const a=t.properties.state,n=y[a],i=n&&n[H]?n[H]:"No data";s(a),m(`${a}: ${i}`),p("map"),d(!0),S({x:e.pageX,y:e.pageY}),o.Ys(this).attr("fill","#B11B10")})).on("mouseout",(function(e,t){s("NIGERIA"),d(!1),o.Ys(this).attr("fill","rgba(0,0,0,0)")})).on("click",(function(e,t){const a=t.properties.state.toLowerCase().replace(/\s+/g,"-");(0,r.c4)(`/${a}`)}));const I=e.append("g").attr("transform","translate(650,500)");let T=u.domain().map((e=>[e,u.invertExtent(u(e))[1]]));T=T.filter(((e,t,a)=>a.findIndex((t=>t[0]===e[0]))===t)),T.some((e=>0===e[0]))||T.unshift([0,0]);const b=I.selectAll("g").data(T).enter().append("g").attr("transform",((e,t)=>`translate(0, ${20*t})`));b.append("rect").attr("width",30).attr("height",20).attr("fill",(e=>(console.log("Legend color for range",e,"is",u(e[0])),u(e[0])))),b.append("text").attr("x",35).attr("y",10).attr("dy","0.35em").attr("font-size","12px").attr("font-family","'Lato', sans-serif").text((e=>(console.log("Legend text for range",e,"is",0===e[0]?"0":`${e[0]} - ${e[1]-1}`),0===e[0]?"0":void 0===e[1]?"Above 30":`${e[0]} - ${e[1]-1}`)))})).catch((e=>{console.log("Error loading file:",e)}))}),[t,a,i]),n.createElement("div",null,n.createElement("div",{className:"map-container"},n.createElement("svg",{ref:l,width:"800",height:"800"}),c&&n.createElement("div",{className:"map"===u?"map-tooltip":"bubble-tooltip info",style:{position:"absolute",top:g.y,left:g.x}},h)))},h=()=>{const{0:e,1:t}=(0,n.useState)("NIGERIA"),{0:a,1:o}=(0,n.useState)(c[0]),{0:r,1:h}=(0,n.useState)(d[0]),{0:m,1:g}=(0,n.useState)(u[0]),{0:S,1:f}=(0,n.useState)(l[0]);return n.createElement(s.Z,{pageTitle:"MHPS 2023"},n.createElement("div",{className:"holder"},n.createElement(i.Z,{selectedState:S,setSelectedState:f,selectedService:a,setSelectedService:o,selectedPopulation:r,setSelectedPopulation:h,selectedLocation:m,setSelectedLocation:g,onServiceChange:e=>{o(e)},onPopulationChange:e=>{h(e)},onLocationChange:e=>{g(e)}}),n.createElement("div",{className:"map-header-container"},n.createElement("div",{id:"current-heading-container"}),n.createElement("div",{className:"current-heading"},e),n.createElement("h4",{className:"map-title"}," ",a!==c[0]?`Number of Providers for ${a}`:r!==d[0]?`Number of Providers for ${r}`:m!==u[0]?`Number of Providers in ${m}`:"Number of HIV Prevention Service Providers"," "),n.createElement(p,{setCurrentHeading:t,selectedService:a,selectedPopulation:r,selectedLocation:m}))))};function m(){return n.createElement("div",{className:"holder"},n.createElement(h,null))}}}]);
//# sourceMappingURL=component---src-pages-index-js-d4a78e2e4913f3a701c9.js.map
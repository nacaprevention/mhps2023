"use strict";(self.webpackChunkmappinghps2023=self.webpackChunkmappinghps2023||[]).push([[921],{9141:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var a=n(7294),o=n(2912),i=n(9528),s=n(3654);n(4160);var l=e=>{let{stateName:t,setCurrentHeading:n,selectedService:i,selectedPopulation:s,selectedLocation:l}=e;const r=(0,a.useRef)(null),{0:c,1:d}=(0,a.useState)(!1),{0:u,1:p}=(0,a.useState)("map"),{0:h,1:m}=(0,a.useState)(""),{0:g,1:S}=(0,a.useState)({x:0,y:0}),f={"All Services":"serviceProviders","Condom Distribution":"CondomDistribution","Family Life and HIV/AIDS Education (FLHE)/Sexuality Education":"FamilyLifeAndHivAidsEducationFlheSexualityEducation","Gender and Human Rights (GHR)":"GenderAndHumanRightsGhr","Harm Reduction: Medication-Assisted Treatment (MAT)":"HarmReductionMedicationAssistedTreatmentMat","Harm Reduction: Needle and Syringe Exchange":"HarmReductionNeedleAndSyringeExchange","HIV Self-Testing (HIVST)":"HivSelfTestingHivst","HIV Testing Services (HTS)":"HivTestingServicesHts","Mental Health Services":"MentalHealthServices","Pre-Exposure Prophylaxis (PrEP)":"PreExposureProphylaxisPrep","Social and Behaviour Change Communication (SBCC)":"SocialAndBehaviourChangeCommunicationSbcc","STI Screening and Treatment":"StiScreeningAndTreatment","Technical Assistance (TA)":"TechnicalAssistanceTa"},v={"All Populations":"allPopulations","Adolescent Girls and Young Women (AGYW) in school":"agywInSchool","Adolescent Girls and Young Women (AGYW) out of school":"agywOutOfSchool","Adolescent Boys and Young Men (ABYM) in school":"abymInSchool","Adolescent Boys and Young Men (ABYM) out of school":"abymOutOfSchool","Children living with HIV":"childrenLivingWithHIV","General population":"generalPopulation","HIV-exposed infants":"hivExposedInfants","Internally Displaced People (IDP)":"idp","Key Populations - Female Sex Workers (FSW)":"kpFsw","Key Populations - Men who have Sex with Men (MSM)":"kpMsm","Key Populations - People in enclosed settings":"kpPeopleInEnclosedSettings","Key Populations - People Who Inject Drugs (PWID)":"kpPwid","Key Populations - Transgender":"kpTransgender","Orphans and Vulnerable Children (OVC)":"ovc",Parents:"parents","People living with disabilities":"peopleLivingWithDisabilities","People Living with HIV (PLHIV)":"plhiv","Serodiscordant couples":"serodiscordantCouples",Teachers:"teachers","Faith Leaders":"faithLeaders",Fishermen:"fishermen",Pastoralists:"pastoralists","Transport Workers":"transportWorkers"},P={"All Locations":"allLocations",Community:"community",Facility:"facility",School:"school"},A=function(e){return e?`/${e.replace(/\s+/g,"_").toLowerCase()}.geojson`:(console.warn("getStateGeoJSONPath was called with an undefined or null stateName."),"")}(t);return(0,a.useEffect)((()=>{const e=o.Ys(r.current),a=o.mw4().translate([310,315]),c=o.l49().projection(a),u=o.ut0().domain([0,1,6,11,21,31]).range(["#D3D3D3","#f7faf5","#a0d492","#78b971","#60a455","#3e8d00","#008000"]);(async()=>{try{const r=await o.AVB(A),h=c.bounds(r),g=o.cSP(r),y=h[1][0]-h[0][0],H=h[1][1]-h[0][1],I=.065/Math.max(y/930,H/930)*930;a.scale(I).center(g),Promise.all([o.gyn("/service_providers.csv")]).then((a=>{let[h]=a;const g=h.reduce(((e,t)=>(e[t.lga_name]=t,e)),{});let A="serviceProviders";"All Services"!==i?A=f[i]:"All Populations"!==s?A=v[s]:"All Locations"!==l&&(A=P[l]);const y=h.reduce(((e,t)=>{const n=t.lga_name,a=+t[A]||0;return e[n]=(e[n]||0)+a,e}),{});e.selectAll("path").remove(),e.append("g").selectAll("path").data(r.features).enter().append("path").attr("d",c).attr("fill",(e=>{const t=y[e.properties.lga_name];return null!=t?u(t):"#f7faf5"})).attr("stroke","#54595f").attr("stroke-width",3).on("mouseover",(function(e,t){const a=t.properties.lga_name,i=g[a],s=i&&i[A]?i[A]:"No data";n(a),m(`${a}: ${s}`),p("map"),d(!0),S({x:e.pageX,y:e.pageY}),o.Ys(this).attr("fill","#eb4747")})).on("mouseout",(function(e,a){n(t),d(!1);const i=y[a.properties.lga_name];o.Ys(this).attr("fill",null!=i?u(i):"#f7faf5")})).on("click",(function(e,t){const n=`./${t.properties.lga_name.toLowerCase().replace(/\s+/g,"-")}/`;window.location.href=n}));const H=e.append("g").attr("transform","translate(650,400)");let I=u.domain().map((e=>[e,u.invertExtent(u(e))[1]]));I=I.filter(((e,t,n)=>n.findIndex((t=>t[0]===e[0]))===t)),I.some((e=>0===e[0]))||I.unshift([0,0]);const E=H.selectAll("g").data(I).enter().append("g").attr("transform",((e,t)=>`translate(0, ${20*t})`));E.append("rect").attr("width",30).attr("height",20).attr("fill",(e=>(console.log("Legend color for range",e,"is",u(e[0])),u(e[0])))),E.append("text").attr("x",35).attr("y",10).attr("dy","0.35em").attr("font-size","12px").attr("font-family","'Lato', sans-serif").text((e=>(console.log("Legend text for range",e,"is",0===e[0]?"0":`${e[0]} - ${e[1]-1}`),0===e[0]?"0":void 0===e[1]?"Above 30":`${e[0]} - ${e[1]-1}`)))}))}catch(r){console.error("Error loading file:",r)}})()}),[i,s,l]),a.createElement("div",null,a.createElement("div",{className:"map-container state"},a.createElement("svg",{ref:r,width:"800",height:"800"}),c&&a.createElement("div",{className:"map-tooltip",style:{position:"absolute",top:g.y,left:g.x}},h)))};n(2891);const r=["All Services","Condom Distribtion","Family Life and HIV/AIDS Education (FLHE)/Sexuality Education","Gender and Human Rights (GHR)","Harm Reduction: Medication-Assisted Treatment (MAT)","Harm Reduction: Needle and Syringe Exchange","HIV Self-Testing (HIVST)","HIV Testing Services (HTS)","Mental Health Services","Pre-Exposure Prophylaxis (PrEP)","Social and Behaviour Change Communication (SBCC)","STI Screening and Treatment","Technical Assistance (TA)"],c=["All Populations","Adolescent Girls and Young Women (AGYW) in school","Adolescent Girls and Young Women (AGYW) out of school","Adolescent Boys and Young Men (ABYM) in school","Adolescent Boys and Young Men (ABYM) out of school","Children living with HIV","General population","HIV-exposed infants","Internally Displaced People (IDP)","Key Populations - Female Sex Workers (FSW)","Key Populations - Men who have Sex with Men (MSM)","Key Populations - People in enclosed settings","Key Populations - People Who Inject Drugs (PWID)","Key Populations - Transgender","Orphans and Vulnerable Children (OVC)","Parents","People living with disabilities","People Living with HIV (PLHIV)","Serodiscordant couples","Teachers","Faith Leaders","Fishermen","Pastoralists","Transport Workers"],d=["All Locations","Community","Facility"];var u=e=>{var t;let{data:n}=e;const o=null===(t=n.allServiceProvidersCsv.nodes[0])||void 0===t?void 0:t.state,{0:u,1:p}=(0,a.useState)(o||"N/A");console.log("State Name in StateTemplate:",o);const[h,m]=a.useState(r[0]),[g,S]=a.useState(c[0]),[f,v]=a.useState(d[0]),[P,A]=a.useState("All LGAs"),{0:y,1:H}=(0,a.useState)(o),{0:I,1:E}=(0,a.useState)([]);(0,a.useEffect)((()=>{if(n&&y){const e=n.allServiceProvidersCsv.nodes.filter((e=>e.state===y)).map((e=>e.lga_name)).filter(((e,t,n)=>n.indexOf(e)===t));E(e)}}),[n,y]);return a.createElement(i.Z,null,a.createElement("div",{className:"holder"},a.createElement(s.Z,{selectedState:y,setSelectedState:H,selectedLga:P,setSelectedLga:A,selectedService:h,setSelectedService:m,selectedPopulation:g,setSelectedPopulation:S,selectedLocation:f,setSelectedLocation:v,onServiceChange:e=>{m(e)},onPopulationChange:e=>{S(e)},onLocationChange:e=>{v(e)},lgaList:I}),a.createElement("div",{className:"map-header-container"},a.createElement("div",{id:"current-heading-container"}),a.createElement("div",{className:"current-heading"},u),a.createElement("h4",{className:"map-title"}," ",h!==r[0]?`Number of Providers for ${h}`:g!==c[0]?`Number of Providers for ${g}`:f!==d[0]?`Number of Providers in ${f}`:"Number of HIV Prevention Service Providers"," "),a.createElement(l,{stateName:o,setCurrentHeading:p,selectedService:h,selectedPopulation:g,selectedLocation:f}))))}}}]);
//# sourceMappingURL=component---src-templates-state-template-js-e16ce09c77f2d75ebe4e.js.map